input OrderItemInput {
	name: String!
	description: String
	price: BigInt!
	unit: String!
	tags: [String!]!
	quantity: Int!
	productId: ID
}

extend type Order {
	id: ID!
	status: String!
	createdAt: DateTime!
	updatedAt: DateTime!

	businessId: ID!
	business: Business!

	customerId: ID!
	customer: Customer!

	items: [OrderItem!]!
}

extend type OrderItem {
	id: ID!
	name: String!
	description: String
	price: BigInt!
	unit: String!
	tags: [String!]!
	quantity: Int!
	createdAt: DateTime!
	updatedAt: DateTime!
	order: Order!
	product: Product!
}

input CreateCustomerOrderInput {
	businessId: ID!
	items: [OrderItemInput!]!
}

input UpdateCustomerOrderInput {
	orderId: ID!
	items: [OrderItemInput!]!
}

extend type Query {
	businessOrders: [Order] @auth(role: BUSINESS)
	businessOrderById(orderId: ID!): Order @auth(role: BUSINESS)

	customerOrders(businessId: ID!): [Order!]! @auth(role: CUSTOMER)
	customerOrderById(orderId: ID!): Order @auth(role: CUSTOMER)
}

extend type Mutation {
	createCustomerOrder(input: CreateCustomerOrderInput!): Order!
		@auth(role: CUSTOMER)

	updateCustomerOrder(input: UpdateCustomerOrderInput!): Order!
		@auth(role: CUSTOMER)

	cancelCustomerOrder(orderId: ID!): Boolean! @auth(role: CUSTOMER)
}
